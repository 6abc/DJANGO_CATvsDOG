<!-- classifier/templates/classifier/result.html -->
{% extends 'classifier/base.html' %}

{% block title %}Result - Cat vs Dog Classifier{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card prediction-card">
            <div class="card-body p-5 text-center">
                <!-- Result Icon -->
                {% if result == 'Dog' %}
                    <i class="bi bi-emoji-smile display-1 text-warning mb-3"></i>
                    <h1 class="text-warning">üê∂ It's a Dog!</h1>
                {% else %}
                    <i class="bi bi-emoji-heart-eyes display-1 text-info mb-3"></i>
                    <h1 class="text-info">üê± It's a Cat!</h1>
                {% endif %}

                <!-- Confidence Score -->
                <div class="my-4">
                    <h3 class="text-muted">Confidence Score</h3>
                    <div class="progress" style="height: 30px;">
                        <div class="progress-bar {% if result == 'Dog' %}bg-warning{% else %}bg-info{% endif %}" 
                             role="progressbar" 
                             style="width: {{ confidence }}%;" 
                             aria-valuenow="{{ confidence }}" 
                             aria-valuemin="0" 
                             aria-valuemax="100">
                            <strong>{{ confidence|floatformat:2 }}%</strong>
                        </div>
                    </div>
                </div>

                <!-- Uploaded Image -->
                <div class="my-4">
                    <img src="{{ image_url }}" alt="Uploaded image" class="img-fluid rounded shadow" style="max-height: 400px;">
                </div>

                <!-- Action Buttons -->
                <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                    <a href="{% url 'index' %}" class="btn btn-primary btn-lg">
                        <i class="bi bi-arrow-left"></i> Try Another Image
                    </a>
                    <a href="{% url 'history' %}" class="btn btn-outline-secondary btn-lg">
                        <i class="bi bi-clock-history"></i> View History
                    </a>
                </div>

                <!-- Share Section -->
                <div class="mt-4">
                    <p class="text-muted">Share this result:</p>
                    <button class="btn btn-sm btn-outline-primary" onclick="shareResult()">
                        <i class="bi bi-share"></i> Share
                    </button>
                </div>
            </div>
        </div>

        <!-- Fun Fact Card -->
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title">
                    {% if result == 'Dog' %}
                        üêï Did you know?
                    {% else %}
                        üêà Did you know?
                    {% endif %}
                </h5>
                <p class="card-text">
                    {% if result == 'Dog' %}
                        Dogs have been human companions for over 15,000 years! They have an incredible sense of smell that is 10,000 to 100,000 times more sensitive than humans.
                    {% else %}
                        Cats spend 70% of their lives sleeping, which means a 9-year-old cat has been awake for only three years of its life! They can rotate their ears 180 degrees.
                    {% endif %}
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Animate the progress bar on load
    window.addEventListener('load', function() {
        const progressBar = document.querySelector('.progress-bar');
        progressBar.style.transition = 'width 1.5s ease-in-out';
    });

    // Share functionality
    function shareResult() {
        if (navigator.share) {
            navigator.share({
                title: 'Cat vs Dog Classifier',
                text: 'I just classified an image as {{ result }} with {{ confidence|floatformat:2 }}% confidence!',
                url: window.location.href
            }).catch((error) => console.log('Error sharing:', error));
        } else {
            alert('Sharing is not supported on this browser. Copy the URL to share!');
        }
    }
</script>
{% endblock %}